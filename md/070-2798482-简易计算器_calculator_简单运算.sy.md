---
show: step
version: 1.0
enable_checker: true
---

# 图片元素

## 回忆

- 上次深入了dom对象的读写
	- 可以读取文本框的value
	- 也可以写p元素的innerHtml
- 如果发现问题
	- 可以通过debug调试器进去
	- 设置断点
	- 添加监视
	- 找到问题

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20240815-1723696462462)

- 想要做个一个计算器？
	- 有可能吗？

### 计算器

- 如果每次点击一个数字按钮
	- 就要对应一个函数
	- 那这个程序就太复杂了

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20240815-1723715828983)

- 能否所有数字
	- 对应着同一个函数？

### 搜索

- 搜索

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20240815-1723715880382)

- 大致能看懂

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20240815-1723715893724)

- 将不同的按钮点击事件
	- 绑定到同一个函数上
	- 然后再根据按钮的不同修改具体值

### 搭建物理结构

```
    <input id="shower"><br/>
    <button id="num7">7</button>
    <button id="num8">8</button>
    <button id="num9">9</button><br/>
    <button id="num4">4</button>
    <button id="num5">5</button>
    <button id="num6">6</button><br/>
    <button id="num1">1</button>
    <button id="num2">2</button>
    <button id="num3">3</button><br/>
    <button id="num0">0</button>
```

- 效果

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20240815-1723716200474)

### 搭建算法逻辑

```
<!DOCTYPE html>
<html lang=en>
<head>
	<meta charset="UTF-8">
	<script>
        var num0 = document.getElementById("num0");
        var num1 = document.getElementById("num1");
        var num2 = document.getElementById("num2");
        var num3 = document.getElementById("num3");
        var num4 = document.getElementById("num4");
        var num5 = document.getElementById("num5");
        var num6 = document.getElementById("num6");
        var num7 = document.getElementById("num7");
        var num8 = document.getElementById("num8");
        var num9 = document.getElementById("num9");
        num0.addEventListener("click", click_num);
        num1.addEventListener("click", click_num);
        num2.addEventListener("click", click_num);
        num3.addEventListener("click", click_num);
        num4.addEventListener("click", click_num);
        num5.addEventListener("click", click_num);
        num6.addEventListener("click", click_num);
        num7.addEventListener("click", click_num);
        num8.addEventListener("click", click_num);
        num9.addEventListener("click", click_num);
        function click_num(event){
            shower = document.getElementById("shower");
            num = event.target.id;
            num = num.replace("num","");
            shower.value = shower.value + num;
        }
	</script>
	<title>Document</title>
</head>
<body>
    <input id="shower"><br/>
    <button id="num7">7</button>
    <button id="num8">8</button>
    <button id="num9">9</button><br/>
    <button id="num4">4</button>
    <button id="num5">5</button>
    <button id="num6">6</button><br/>
    <button id="num1">1</button>
    <button id="num2">2</button>
    <button id="num3">3</button><br/>
    <button id="num0">0</button>
</body>
</html>
```

- 调试运行

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20240815-1723716764058)

- num0不认

### 原因

- 因为在执行script时
	- Dom树还没将body元素和里面的按钮都构建好

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20240815-1723717027682/wm)

- 将script元素
	- 调整到body元素后面

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20240815-1723717055512)

- 数字按钮可以用了

### 运算

```html
    <input id="shower"><br/>
    <button id="num7">7</button>
    <button id="num8">8</button>
    <button id="num9">9</button>
    <button id="divide" onclick="divide()">/</button><br/>
    <button id="num4">4</button>
    <button id="num5">5</button>
    <button id="num6">6</button>
    <button id="divide" onclick="multiple()">x</button><br/>
    <button id="num1">1</button>
    <button id="num2">2</button>
    <button id="num3">3</button>
    <button id="divide" onclick="minus()">-</button><br/>
    <button id="num0">0</button>
    <button id="cal" onclick="cal()" style="width:45px">=</button>
    <button id="add" onclick="add()">+</button></br>
```

- 效果

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20240815-1723717496335)

- 下面定义具体的函数

### 加法运算

- 定义三个全局变量

```javascript
    operand1 = 0;
    operand2 = 0;
    operator = "";
```

- 定义加法函数

```javascript
    function add(){
        shower = document.getElementById("shower");
        operand1 = shower.value;
        shower.value = "";
        operator = "+";
    }
```

- 定义运算函数

```javascript
    function cal(){
        shower = document.getElementById("shower");
        operand2 = shower.value;
        shower.value = operand1 + operand2;
    }
```

- 运算结果
	- 可以相加
	- 但是和为字符串拼合

### 类型转化

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20240815-1723718074729)

- 需要使用parseInt函数转化


```javascript
    function cal(){
        shower = document.getElementById("shower");
        operand2 = shower.value;
        shower.value = parseInt(operand1) + parseInt(operand2);
    }
```

### 通用化

- 根据操作符
	- 来决定运算

```
    function cal(){
        shower = document.getElementById("shower");
        operand2 = shower.value;
        if (operator == "+"){
            shower.value = parseInt(operand1) + parseInt(operand2);
        }
    }
```

- 运行成功

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20240815-1723718296919)

- 将乘法、除法、减法完成！

### 补完代码

```javascript
    function add(){
        shower = document.getElementById("shower");
        operand1 = shower.value;
        shower.value = "";
        operator = "+";
    }
    function minus(){
        shower = document.getElementById("shower");
        operand1 = shower.value;
        shower.value = "";
        operator = "-";
    }
    function multiple(){
        shower = document.getElementById("shower");
        operand1 = shower.value;
        shower.value = "";
        operator = "*";
    }
    function divide(){
        shower = document.getElementById("shower");
        operand1 = shower.value;
        shower.value = "";
        operator = "/";
    }
    function cal(){
        shower = document.getElementById("shower");
        operand2 = shower.value;
        if (operator == "+"){
            shower.value = parseInt(operand1) + parseInt(operand2);
        }
        else if (operator == "-"){
            shower.value = parseInt(operand1) - parseInt(operand2);
        }
        else if (operator == "*"){
            shower.value = parseInt(operand1) * parseInt(operand2);
        }
        else if (operator == "/"){
            shower.value = parseInt(operand1) / parseInt(operand2);
        }
    }
```

- 加减乘除都能算

### 完整代码

```
<!DOCTYPE html>
<html lang=en>
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
    <input id="shower"><br/>
    <button id="num7">7</button>
    <button id="num8">8</button>
    <button id="num9">9</button>
    <button id="divide" onclick="divide()">/</button><br/>
    <button id="num4">4</button>
    <button id="num5">5</button>
    <button id="num6">6</button>
    <button id="divide" onclick="multiple()">x</button><br/>
    <button id="num1">1</button>
    <button id="num2">2</button>
    <button id="num3">3</button>
    <button id="divide" onclick="minus()">-</button><br/>
    <button id="num0">0</button>
    <button id="cal" onclick="cal()" style="width:45px">=</button>
    <button id="add" onclick="add()">+</button></br>
</body>
<script>
    operand1 = 0;
    operand2 = 0;
    operator = "";
    var num0 = document.getElementById("num0");
    var num1 = document.getElementById("num1");
    var num2 = document.getElementById("num2");
    var num3 = document.getElementById("num3");
    var num4 = document.getElementById("num4");
    var num5 = document.getElementById("num5");
    var num6 = document.getElementById("num6");
    var num7 = document.getElementById("num7");
    var num8 = document.getElementById("num8");
    var num9 = document.getElementById("num9");
    num0.addEventListener("click", click_num);
    num1.addEventListener("click", click_num);
    num2.addEventListener("click", click_num);
    num3.addEventListener("click", click_num);
    num4.addEventListener("click", click_num);
    num5.addEventListener("click", click_num);
    num6.addEventListener("click", click_num);
    num7.addEventListener("click", click_num);
    num8.addEventListener("click", click_num);
    num9.addEventListener("click", click_num);
    function click_num(event){
        shower = document.getElementById("shower");
        num = event.target.id;
        num = num.replace("num","");
        shower.value = shower.value + num;
    }
    function add(){
        shower = document.getElementById("shower");
        operand1 = shower.value;
        shower.value = "";
        operator = "+";
    }
    function minus(){
        shower = document.getElementById("shower");
        operand1 = shower.value;
        shower.value = "";
        operator = "-";
    }
    function multiple(){
        shower = document.getElementById("shower");
        operand1 = shower.value;
        shower.value = "";
        operator = "*";
    }
    function divide(){
        shower = document.getElementById("shower");
        operand1 = shower.value;
        shower.value = "";
        operator = "/";
    }
    function cal(){
        shower = document.getElementById("shower");
        operand2 = shower.value;
        if (operator == "+"){
            shower.value = parseInt(operand1) + parseInt(operand2);
        }
        else if (operator == "-"){
            shower.value = parseInt(operand1) - parseInt(operand2);
        }
        else if (operator == "*"){
            shower.value = parseInt(operand1) * parseInt(operand2);
        }
        else if (operator == "/"){
            shower.value = parseInt(operand1) / parseInt(operand2);
        }
    }
</script>
</html>
```
### 总结 🤔

- 这次制作了一个计算器
	- 直接使用表单项就可以制作出来
	- 而且跨平台
- 不管是
	- 微软的windows
	- 苹果的Macox
	- 类unix的xwindows
	- 都可以用
- 这其实也就跳出了
	- 微软的编程框架
	- 微软是希望你的各种按钮
	- 都是基于微软图形界面的

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20240815-1723718766125)

- 现在所有了操作界面都基于网页了
	- 微软会如何应对呢？🤔
- 下次再说！👋